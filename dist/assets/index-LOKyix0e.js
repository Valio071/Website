var e=Object.defineProperty,t=(t,r,s)=>((t,r,s)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s)(t,"symbol"!=typeof r?r+"":r,s);function r(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class s{constructor(){t(this,"observer"),t(this,"supportsWebP"),t(this,"supportsAVIF"),this.observer=null,this.supportsWebP=this.checkWebPSupport(),this.supportsAVIF=this.checkAVIFSupport(),this.init()}async init(){await this.supportsWebP,await this.supportsAVIF,this.setupLazyLoading(),this.preloadCriticalImages()}checkWebPSupport(){return new Promise(e=>{const t=new Image;t.onload=t.onerror=()=>{e(2===t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"})}checkAVIFSupport(){return new Promise(e=>{const t=new Image;t.onload=t.onerror=()=>{e(2===t.height)},t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgABogQEAwgMg8f8D///8WfhwB8+ErK42A="})}generateSrcSet(e,t=[400,800,1200,1600]){const r=e.split(".").pop(),s=e.replace(".".concat(r),"");return t.map(e=>{const t="".concat(s,"-").concat(e,"w.webp ").concat(e,"w"),i="".concat(s,"-").concat(e,"w.avif ").concat(e,"w"),n="".concat(s,"-").concat(e,"w.").concat(r," ").concat(e,"w");return this.supportsAVIF?i:this.supportsWebP?t:n}).join(", ")}setupLazyLoading(){if(!("IntersectionObserver"in window))return void this.loadAllImages();this.observer=new IntersectionObserver(e=>{e.forEach(e=>{var t;e.isIntersecting&&(this.loadImage(e.target),null==(t=this.observer)||t.unobserve(e.target))})},{root:null,rootMargin:"50px",threshold:.1});document.querySelectorAll("img[data-src], picture[data-src]").forEach(e=>{var t;return null==(t=this.observer)?void 0:t.observe(e)})}loadImage(e){"IMG"===e.tagName?this.loadImgElement(e):"PICTURE"===e.tagName&&this.loadPictureElement(e),e.classList.add("loading");const t="IMG"===e.tagName?e:e.querySelector("img");t&&(t.addEventListener("load",()=>{e.classList.remove("loading"),e.classList.add("loaded")},{once:!0}),t.addEventListener("error",()=>{e.classList.remove("loading"),e.classList.add("error")},{once:!0}))}loadImgElement(e){e.dataset.src&&(e.src=e.dataset.src,e.removeAttribute("data-src")),e.dataset.srcset&&(e.srcset=e.dataset.srcset,e.removeAttribute("data-srcset"))}loadPictureElement(e){e.querySelectorAll("source[data-srcset]").forEach(e=>{e.dataset.srcset&&(e.srcset=e.dataset.srcset,e.removeAttribute("data-srcset"))});const t=e.querySelector("img[data-src]");t&&this.loadImgElement(t)}preloadCriticalImages(){document.querySelectorAll('img[data-critical="true"]').forEach(e=>{this.loadImage(e)})}loadAllImages(){document.querySelectorAll("img[data-src], picture[data-src]").forEach(e=>this.loadImage(e))}createPictureElement(e,t,r,s=""){const i=document.createElement("picture");if(i.className=s,this.supportsAVIF){const t=document.createElement("source");t.setAttribute("data-srcset",this.generateAVIFSrcSet(e)),t.setAttribute("sizes",r),t.type="image/avif",i.appendChild(t)}if(this.supportsWebP){const t=document.createElement("source");t.setAttribute("data-srcset",this.generateWebPSrcSet(e)),t.setAttribute("sizes",r),t.type="image/webp",i.appendChild(t)}const n=document.createElement("img");return n.setAttribute("data-src",e),n.setAttribute("data-srcset",this.generateSrcSet(e)),n.setAttribute("sizes",r),n.alt=t,n.loading="lazy",n.decoding="async",i.appendChild(n),i}generateWebPSrcSet(e){return this.generateSrcSet(e).replace(/\.(jpg|jpeg|png)/g,".webp")}generateAVIFSrcSet(e){return this.generateSrcSet(e).replace(/\.(jpg|jpeg|png)/g,".avif")}}const i=(e,t)=>{let r;return function(...s){clearTimeout(r),r=setTimeout(()=>{clearTimeout(r),e(...s)},t)}},n=(e,t)=>{let r;return function(...s){r||(e.apply(this,s),r=!0,setTimeout(()=>r=!1,t))}};class o{constructor(){t(this,"menuBtn"),t(this,"menu"),t(this,"closeBtn"),t(this,"menuLinks"),t(this,"body"),this.menuBtn=document.querySelector(".mobile-menu-btn"),this.menu=document.querySelector(".mobile-menu"),this.closeBtn=document.querySelector(".mobile-menu-close"),this.menuLinks=document.querySelectorAll(".mobile-nav-link"),this.body=document.body,this.init()}init(){var e;this.menuBtn&&this.menu&&(this.menuBtn.addEventListener("click",()=>this.toggleMenu()),null==(e=this.closeBtn)||e.addEventListener("click",()=>this.closeMenu()),this.menuLinks.forEach(e=>{e.addEventListener("click",()=>this.closeMenu())}),this.menu.addEventListener("click",e=>{e.target===this.menu&&this.closeMenu()}),document.addEventListener("keydown",e=>{var t;"Escape"===e.key&&(null==(t=this.menu)?void 0:t.classList.contains("active"))&&this.closeMenu()}),window.addEventListener("resize",i(()=>{var e;window.innerWidth>768&&(null==(e=this.menu)?void 0:e.classList.contains("active"))&&this.closeMenu()},250)))}toggleMenu(){var e;(null==(e=this.menu)?void 0:e.classList.contains("active"))?this.closeMenu():this.openMenu()}openMenu(){var e,t,r,s;null==(e=this.menu)||e.classList.add("active"),null==(t=this.menu)||t.setAttribute("aria-hidden","false"),null==(r=this.menuBtn)||r.setAttribute("aria-expanded","true"),this.body.style.overflow="hidden";const i=null==(s=this.menu)?void 0:s.querySelector(".mobile-nav-link");i&&setTimeout(()=>i.focus(),100)}closeMenu(){var e,t,r,s;null==(e=this.menu)||e.classList.remove("active"),null==(t=this.menu)||t.setAttribute("aria-hidden","true"),null==(r=this.menuBtn)||r.setAttribute("aria-expanded","false"),this.body.style.overflow="",null==(s=this.menuBtn)||s.focus()}}class a{constructor(){t(this,"header"),t(this,"scrollThreshold",50),this.header=document.querySelector(".header"),this.init()}init(){if(!this.header)return;const e=n(()=>{var e;const t=window.pageYOffset>this.scrollThreshold;null==(e=this.header)||e.classList.toggle("scrolled",t)},16);window.addEventListener("scroll",e),e()}}class c{constructor(){t(this,"form"),t(this,"formState"),this.form=document.querySelector(".contact-form"),this.formState={fields:{},errors:{},isSubmitting:!1,isValid:!1},this.init()}init(){if(!this.form)return;this.form.addEventListener("submit",e=>this.handleSubmit(e));this.form.querySelectorAll("input, textarea, select").forEach(e=>{e.addEventListener("blur",()=>this.validateField(e)),e.addEventListener("input",i(()=>this.clearErrors(e),300))})}async handleSubmit(e){if(e.preventDefault(),!this.form)return;const t=new FormData(this.form);this.validateForm()?await this.submitForm(t):this.focusFirstError()}validateForm(){var e;let t=!0;const r=null==(e=this.form)?void 0:e.querySelectorAll("[required]");return null==r||r.forEach(e=>{this.validateField(e)||(t=!1)}),t}validateField(e){const t=e.name,r=e.value.trim();this.clearErrors(e);let s=!0,i="";return e.hasAttribute("required")&&!r?(i="Това поле е задължително",s=!1):"email"===e.type&&r&&!this.isValidEmail(r)?(i="Моля въведете валиден имейл адрес",s=!1):"tel"===e.type&&r&&!this.isValidPhone(r)?(i="Моля въведете валиден телефонен номер",s=!1):"name"===t&&r&&r.length<2&&(i="Името трябва да съдържа поне 2 символа",s=!1),s||this.showError(e,i),s}showError(e,t){const r=document.getElementById("".concat(e.name,"-error"));e.classList.add("error"),e.setAttribute("aria-invalid","true"),r&&(r.textContent=t,r.setAttribute("aria-live","polite"))}clearErrors(e){const t=document.getElementById("".concat(e.name,"-error"));e.classList.remove("error"),e.setAttribute("aria-invalid","false"),t&&(t.textContent="")}focusFirstError(){var e;const t=null==(e=this.form)?void 0:e.querySelector(".error");t&&(t.focus(),t.scrollIntoView({behavior:"smooth",block:"center"}))}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}isValidPhone(e){const t=e.replace(/[\s\-\(\)]/g,"");return/^(\+359|359|0)?\s?[0-9]{8,9}$/.test(t)}async submitForm(e){var t,r;const s=null==(t=this.form)?void 0:t.querySelector('button[type="submit"]'),i=(null==s?void 0:s.textContent)||"";try{s&&(s.disabled=!0,s.textContent="Изпращане..."),await this.simulateSubmission(e),this.showSuccess(),null==(r=this.form)||r.reset()}catch(n){this.showSubmissionError()}finally{s&&(s.disabled=!1,s.textContent=i)}}simulateSubmission(e){return new Promise(e=>{setTimeout(()=>{e()},2e3)})}showSuccess(){var e;const t=document.createElement("div");t.className="success-message",t.textContent="Благодарим ви! Ще се свържем с вас в най-скоро време.",t.style.cssText="\n      background: #10B981;\n      color: white;\n      padding: 1rem;\n      border-radius: 8px;\n      margin-bottom: 1rem;\n      text-align: center;\n      font-weight: 600;\n    ",null==(e=this.form)||e.insertBefore(t,this.form.firstChild),setTimeout(()=>{t.remove()},5e3)}showSubmissionError(){var e;const t=document.createElement("div");t.className="error-message",t.textContent="Възникна грешка при изпращането. Моля опитайте отново или се обадете на телефона ни.",t.style.cssText="\n      background: #EF4444;\n      color: white;\n      padding: 1rem;\n      border-radius: 8px;\n      margin-bottom: 1rem;\n      text-align: center;\n      font-weight: 600;\n    ",null==(e=this.form)||e.insertBefore(t,this.form.firstChild),setTimeout(()=>{t.remove()},8e3)}}class l{constructor(){t(this,"filterButtons"),t(this,"portfolioItems"),t(this,"beforeAfterSliders"),this.filterButtons=document.querySelectorAll(".filter-btn"),this.portfolioItems=document.querySelectorAll(".portfolio-item"),this.beforeAfterSliders=document.querySelectorAll(".image-container"),this.init()}init(){this.initFilters(),this.initBeforeAfterSliders()}initFilters(){this.filterButtons.forEach(e=>{e.addEventListener("click",e=>{const t=e.target,r=t.dataset.filter;r&&(this.filterPortfolio(r),this.updateActiveFilter(t))})})}filterPortfolio(e){this.portfolioItems.forEach(t=>{const r=t.dataset.category;"all"===e||r===e?(t.classList.remove("hidden"),t.classList.add("fade-in"),setTimeout(()=>{t.classList.remove("fade-in")},500)):t.classList.add("hidden")})}updateActiveFilter(e){this.filterButtons.forEach(e=>{e.classList.remove("active")}),e.classList.add("active")}initBeforeAfterSliders(){this.beforeAfterSliders.forEach(e=>{const t=e.querySelector(".after-image"),r=e.querySelector(".slider-handle");let s=!1;const i=e=>{e=Math.max(0,Math.min(100,e)),t&&(t.style.clipPath="polygon(".concat(e,"% 0%, 100% 0%, 100% 100%, ").concat(e,"% 100%)")),r&&(r.style.left="".concat(e,"%"))},n=t=>{const r=e.getBoundingClientRect();return((t.type.includes("touch")&&t.touches?t.touches[0].clientX:t.clientX||0)-r.left)/r.width*100};e.addEventListener("mousedown",t=>{s=!0,e.style.cursor="ew-resize",i(n(t))}),document.addEventListener("mousemove",e=>{s&&(e.preventDefault(),i(n(e)))}),document.addEventListener("mouseup",()=>{s&&(s=!1,e.style.cursor="ew-resize")}),e.addEventListener("keydown",e=>{if("ArrowLeft"===e.key){e.preventDefault();const t=parseFloat(r.style.left)||50;i(t-5)}else if("ArrowRight"===e.key){e.preventDefault();const t=parseFloat(r.style.left)||50;i(t+5)}}),e.setAttribute("tabindex","0"),e.setAttribute("role","slider"),e.setAttribute("aria-label","Плъзнете за да видите преди и след"),e.setAttribute("aria-valuemin","0"),e.setAttribute("aria-valuemax","100"),e.setAttribute("aria-valuenow","50")})}}class u{constructor(){this.init()}init(){this.trackFormSubmissions(),this.trackPhoneCalls(),this.trackScrollDepth()}trackFormSubmissions(){document.addEventListener("submit",e=>{e.target.matches(".contact-form")&&this.trackEvent("form","submit","contact_form")})}trackPhoneCalls(){document.querySelectorAll('a[href^="tel:"]').forEach(e=>{e.addEventListener("click",()=>{this.trackEvent("contact","phone_click",e.href)})})}trackScrollDepth(){let e=0;const t=[25,50,75,90],r={},s=n(()=>{const s=Math.round(window.scrollY/(document.body.scrollHeight-window.innerHeight)*100);s>e&&(e=s,t.forEach(e=>{s>=e&&!r[e]&&(this.trackEvent("scroll","depth","".concat(e,"%")),r[e]=!0)}))},250);window.addEventListener("scroll",s)}trackEvent(e,t,r){void 0!==window.gtag&&window.gtag("event",e,{event_category:t,event_label:r})}}function d(){try{new o,new a,new c,new l,new s,new u}catch(e){}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",d):d(),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{}).catch(e=>{})});export{r as __vite_legacy_guard};
